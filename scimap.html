<DOCTYPE! html>

<head>
    <meta charset=UTF-8 />
    <link rel='shortcut icon' type='image/x-icon' href='images/favicon.ico' />
    <title>Map of Science</title>
    <script src="lib/angular/angular.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="lib/head.js"></script>
    <script src="src/Init.js"></script>

    <script src="lib/jquery.min.js"></script>
    <script src="lib/bootstrap.min.js"></script>
    <style type="text/css">
        .legend-item-1 {
            width: 150px !important;
        }

        .legend-item-2 {
            width: 650px !important;
        }

        .legend-item-label {
            text-align: left;
        }

        .legend-row {
            width: 510px;
        }
        
        a.disabled {
   pointer-events: none;
   cursor: default;
   color:black;
}

    </style>

</head>

<body id="sciMapBody">
    <div class="container-fluid">
       <!-- Trigger the modal with a button -->
       <div ng-include="'partials/scimap_about_modal.html'"></div>
       <button type="button" class="btn btn-info btn-s" data-toggle="modal" data-target="#myModal" id="scimapAbout">  <span class="glyphicon glyphicon-info-sign"></span> About</button>
       <div flex layout-fill layout="row" >
        <div flex layout="column">
            <div ng-include="'partials/scimap-popup.html'"></div>
            <div layout="column" layout-fill class="wrapper" ng-controller="ngCnsVisual" ng-reset-on-resize ng-data-attr="ng-cns-visual" ng-config="visuals/scimap01-config.js" ng-vis-type="MapOfScience" id="scimap01" ng-data-field="nanohub" ng-identifier="scimap01">
            </div>

            <div class="scimap-legend">
                <button>
                    <span>Legend</span>
                </button>
                <div class="legend-row">
                    <div flex layout="row" layout-wrap>
                        <div flex="32" layout="column" style="margin-top: 6px; margin-left: 10px;">
                            <div class="legend-item-label">Nodes</div>
                            <div>
                                <div flex class="legend-item-1">
                                    <div ng-controller="ngCnsVisual" ng-data-attr="ng-cns-visual" ng-vis-type="LegendNodeSize" id="nodeSize" ng-identifier="nodeSize">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div flex="65" layout="column">
                            <div class="legend-item-label" id ="edges">Disciplines</div>
                            <div> 
                                <div class="legend-item-2">
                                 <img src="partials/svgScimapLegend.svg" class="test-bug"/>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
</div>

<button type="button" class="btn btn-primary btn-s" id="backgroundChange" onclick="changeBackgroundColor();">B/W</button>
</div>
</body>
<script>
    var legendToggleOff = true;
    $(".test-bug").css("display","none");
    setTimeout(function() {
        $(document).ready(function() {
            $(".scimap-legend").click(function() {
                toggleLegend();
            });
        });
    }, 2000)

    function toggleLegend() {
        if (legendToggleOff) {
            $(".scimap-legend").animate({
                bottom: '0px'
            }, 60);
            legendToggleOff = false;
       $(".test-bug").css("display","block");

        } else {
            $(".scimap-legend").animate({
                bottom: '-196px'
            }, 60);
            legendToggleOff = true;
           $(".test-bug").css("display","none");
        }

    }

    function changeBackgroundColor(){
        var current = document.body.style.backgroundColor;
        console.log(current);
        if (current == 'white' || current == '')
        {
            document.body.style.backgroundColor = '#282823';
            document.getElementById("zoom-text").style.fill="white";
        }
        if (current == 'black' ) {
            document.body.style.backgroundColor = 'white';
            document.getElementById("zoom-text").style.fill="black";
        }
    }

</script>

</html>
